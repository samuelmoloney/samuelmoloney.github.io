(()=>{"use strict";var t,i,e,s={5074:(t,i,e)=>{var s=e(7953),o=e.n(s);class r{static getRandomNumber(t,i){return Math.random()*(i-t)+t}static dist(t,i,e,s){return Math.sqrt(Math.pow(e-t,2)+Math.pow(s-i,2))}static map(t,i,e,s,o){return(t-i)/(e-i)*(o-s)+s}static mapSize(t,i,e,s){let o=i/2,r=Math.abs(t-o)/o;return this.lerp(s,e,1-r)}static lerp(t,i,e){return t+(i-t)*e}}class h{static random2DPos(t,i){return new(o().Vector)(Math.random()*t,Math.random()*i)}}class n{constructor(t,i,e){this.r=t,this.g=i,this.b=e}toHex(){const t=t=>t.toString(16).padStart(2,"0");return`#${t(this.r)}${t(this.g)}${t(this.b)}`}fromHex(t){const[i,e,s]=(t=>{const i=t.replace(/#/,"").match(/.{1,2}/g);if(!i)throw new Error(`Invalid hex color: ${t}`);return i.map((t=>parseInt(t,16)))})(t);return new n(i,e,s)}toString(){return`rgb(${this.r},${this.g},${this.b})`}fromString(t){const i=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(!i)throw new Error(`Invalid rgb color: ${t}`);const[,e,s,o]=i.map((t=>parseInt(t,10)));return new n(e,s,o)}toArray(t){return null==t?[this.r,this.g,this.b]:[this.r,this.g,this.b,t]}}function a(t,i,e){return t+(i-t)*e}class d{constructor(t,i,e){this.minSize=2,this.maxSize=15,this.position=new(o().Vector)(0,0),this.lastDirection=new(o().Vector)(1,0),this.smoothingFactor=.5,this.segments=[],this.p5i=e,this.position=t;let s=Math.random(),h=function(t,i,e){const s=Math.round(a(t.r,i.r,e)),o=Math.round(a(t.g,i.g,e)),r=Math.round(a(t.b,i.b,e));return new n(s,o,r)}(new n(24,28,20),new n(236,223,204),s);for(let t=0;t<i;t++){let e=i-t;e=r.mapSize(t,i,this.minSize,this.maxSize);let s=1.5*e,o=.5*e,n=.5*e;0==t&&(n=.5*e);let a=new c(this.position.copy(),n,s,o,h.toArray(0==t?255:100));this.segments.push(a)}}update(t,i){this.position=t;let e=i.copy().normalize(),s=o().Vector.lerp(this.lastDirection,e,this.smoothingFactor);this.lastDirection=s,this.segments[0].direction=s,this.segments[0].position=this.position;for(let t=1;t<this.segments.length;t++)this.segments[t].follow(this.segments[t-1]),t>.5*this.segments.length&&this.segments[t].animateTailMovement(i,this.p5i)}draw(){for(let t=0;t<this.segments.length;t++)this.segments[t].draw(this.p5i)}}class c{constructor(t,i,e,s,r=[0,0,0,255]){this.time=0,this.position=t,this.direction=new(o().Vector)(1,0),this.localRotation=0,this.desiredDistance=i,this.width=e,this.height=s,this.color=r}follow(t){let i=t.position.copy(),e=o().Vector.dist(this.position,i);if(e>this.desiredDistance){let t=o().Vector.sub(i,this.position);t.setMag(e-this.desiredDistance),this.position.add(t)}this.direction=o().Vector.sub(t.position,this.position).normalize()}animateTailMovement(t,i){let e=t.mag(),s=r.map(e,-.05,.6,0,1);this.time+=i.deltaTime,this.time>1e6&&(this.time=0),this.localRotation=r.lerp(-.4*s,.8*s,Math.sin(.01*this.time))}draw(t){t.fill(this.color),t.push(),t.translate(this.position.x,this.position.y),t.rotate(this.direction.heading()),t.rotate(this.localRotation),t.ellipse(0,0,this.width,this.height),t.pop()}}class l{constructor(t,i){this.fov=25,this.sightRadius=60,this.avoidanceRadius=20,this.minSpeed=.1,this.maxSpeed=.3,this.desiredSeparation=50,this.desiredAlignment=25,this.desiredCohesion=25,this.timer=0,this.interval=0,this.p5i=i,this.position=t,this.velocity=i.createVector(0,0),this.velocity=i.createVector(i.random(-1,1),i.random(-1,1)),this.velocity.setMag(i.random(.5,this.maxSpeed)),this.acceleration=i.createVector(0,0),this.currentSpeed=i.random(this.minSpeed,this.maxSpeed),this.fish=new d(this.position,10,i)}getSteeringDirection(){return this.velocity.copy().normalize()}isInCone(t){const i=o().Vector.sub(t.position,this.position);return!(i.mag()>this.sightRadius)&&o().Vector.angleBetween(this.getSteeringDirection(),i)<this.fov/2}scare(t,i,e){0!=t.mag()&&(this.acceleration.add(t),this.currentSpeed=2*this.maxSpeed,this.interval=this.p5i.random(i,e))}addForce(t){this.acceleration.add(t)}update(){let t=this.p5i.deltaTime;this.position.add(this.velocity.mult(t)),this.velocity.add(this.acceleration),this.velocity.limit(this.currentSpeed),this.worldWrap(),this.acceleration=this.p5i.createVector(0,0),this.fish.update(this.position,this.velocity),this.timer+=t,this.timer>this.interval&&(this.timer=0,this.interval=this.p5i.random(1e3,5e3),this.currentSpeed=this.p5i.random(this.minSpeed,this.maxSpeed))}worldWrap(){let t=100;this.position.x>this.p5i.width+t?this.position.x=-100:this.position.x<-100&&(this.position.x=this.p5i.width+t),this.position.y>this.p5i.height+t?this.position.y=-100:this.position.y<-100&&(this.position.y=this.p5i.height+t)}draw(){this.fish.draw()}}class u{constructor(t,i,e,s){this.x=t,this.y=i,this.w=e,this.h=s}contains(t,i){return t>=this.x-this.w&&t<this.x+this.w&&i>=this.y-this.h&&i<this.y+this.h}intersects(t){return!(t.x-t.r>this.x+this.w||t.x+t.r<this.x-this.w||t.y-t.r>this.y+this.h||t.y+t.r<this.y-this.h)}}class p{constructor(t,i,e=0){this.depth=0,this.boundary=t,this.capacity=i,this.data=[],this.divided=!1,this.depth=e}subdivide(){const t=this.boundary.x,i=this.boundary.y,e=this.boundary.w/2,s=this.boundary.h/2,o=new u(t+e,i-s,e,s),r=new u(t-e,i-s,e,s),h=new u(t+e,i+s,e,s),n=new u(t-e,i+s,e,s);this.northeast=new p(o,this.capacity,this.depth+1),this.northwest=new p(r,this.capacity,this.depth+1),this.southeast=new p(h,this.capacity,this.depth+1),this.southwest=new p(n,this.capacity,this.depth+1),this.divided=!0}insert(t){var i,e,s,o;return!!this.boundary.contains(t.position.x,t.position.y)&&(this.data.length<this.capacity?(this.data.push(t),!0):(this.divided||this.subdivide(),!!((null===(i=this.northeast)||void 0===i?void 0:i.insert(t))||(null===(e=this.northwest)||void 0===e?void 0:e.insert(t))||(null===(s=this.southeast)||void 0===s?void 0:s.insert(t))||(null===(o=this.southwest)||void 0===o?void 0:o.insert(t)))))}query(t,i,e=[]){var s,o,r,h;if(!this.boundary.intersects(t))return e;for(let s of this.data)s instanceof i&&t.contains(s.position)&&e.push(s);return this.divided&&(null===(s=this.northwest)||void 0===s||s.query(t,i,e),null===(o=this.northeast)||void 0===o||o.query(t,i,e),null===(r=this.southwest)||void 0===r||r.query(t,i,e),null===(h=this.southeast)||void 0===h||h.query(t,i,e)),e}draw(t){var i,e,s,o;let r=this.depth/5;t.strokeWeight(2*r),t.stroke(236,223,204,255*r*.1),t.noFill(),t.rectMode(t.CENTER),t.rect(this.boundary.x,this.boundary.y,2*this.boundary.w,2*this.boundary.h),t.strokeWeight(3*r),t.point(this.boundary.x-this.boundary.w,this.boundary.y-this.boundary.h),t.point(this.boundary.x+this.boundary.w,this.boundary.y-this.boundary.h),t.point(this.boundary.x-this.boundary.w,this.boundary.y+this.boundary.h),t.point(this.boundary.x+this.boundary.w,this.boundary.y+this.boundary.h),this.divided&&(null===(i=this.northeast)||void 0===i||i.draw(t),null===(e=this.northwest)||void 0===e||e.draw(t),null===(s=this.southeast)||void 0===s||s.draw(t),null===(o=this.southwest)||void 0===o||o.draw(t))}}class m{constructor(t,i,e,s){this.currentRadius=0,this.time=0,this.position=new(o().Vector)(t,i),this.radius=e,this.currentRadius=e,this.p5i=s}update(){this.time+=this.p5i.deltaTime,this.currentRadius=this.radius+100*Math.sin(.005*this.time),this.time>1e6&&(this.time=0)}draw(){this.p5i.fill(255,255,255,50),this.p5i.ellipse(this.position.x,this.position.y,.5*this.currentRadius,.5*this.currentRadius)}}class y{constructor(t,i,e){this.x=t,this.y=i,this.r=e}contains(t){return r.dist(t.x,t.y,this.x,this.y)<=this.r}intersectsRectangle(t){const i=Math.abs(t.x-this.x),e=Math.abs(t.y-this.y),s=this.r,o=t.w/2,r=t.h/2,h=Math.pow(i-o,2)+Math.pow(e-r,2);return!(i>s+o||e>s+r)&&(i<=o||e<=r||h<=Math.pow(s,2))}intersectsCircle(t){return r.dist(this.x,this.y,t.x,t.y)<=this.r+t.r}draw(t){t.fill(255,0,0,100),t.ellipse(this.x,this.y,2*this.r,2*this.r)}}class w{constructor(t){this.boids=[],this.obstacles=[],this.quadtree=new p(new u(0,0,0,0),0),this.p5i=t,this.boidsCount=this.calculateBoidCountFromScreenSize(),this.clickObstacle=new m(0,0,0,this.p5i),this.setup()}setup(){this.addAvoidanceObstacle(this.clickObstacle);for(let t=0;t<this.boidsCount;t++){let t=new l(h.random2DPos(this.p5i.width,this.p5i.height),this.p5i);this.boids.push(t)}this.p5i.mouseDragged=()=>{this.clickObstacle.position=this.p5i.createVector(this.p5i.mouseX,this.p5i.mouseY),this.clickObstacle.radius=400},this.p5i.mousePressed=()=>{this.clickObstacle.position=this.p5i.createVector(this.p5i.mouseX,this.p5i.mouseY),this.clickObstacle.radius=400},this.p5i.mouseReleased=()=>{this.clickObstacle.position=this.p5i.createVector(0,0),this.clickObstacle.radius=0},this.refreshQuadtree()}refreshQuadtree(){let t=new u(0,0,this.p5i.width,this.p5i.height);this.quadtree=new p(t,1);for(let t of this.boids)this.quadtree.insert(t);for(let t of this.obstacles)this.quadtree.insert(t)}addAvoidanceObstacle(t){this.obstacles.push(t)}update(){this.refreshQuadtree();for(let t of this.boids){let i=new y(t.position.x,t.position.y,t.sightRadius),e=this.quadtree.query(i,l),s=this.quadtree.query(i,m);if(void 0!==e){e=e.filter((i=>t.isInCone(i)));let i=this.alignment(t,e),s=this.cohesion(t,e),o=this.separation(t,e);t.addForce(i),t.addForce(s),t.addForce(o)}void 0!==s&&t.scare(this.avoidObstacle(t,s),100,500),t.update()}for(let t of this.obstacles)t.update()}draw(){for(let t of this.boids)t.draw();for(let t of this.obstacles)t.draw();this.quadtree.draw(this.p5i)}calculateBoidCountFromScreenSize(){let t=Math.min(this.p5i.width,this.p5i.height);return Math.floor(t/10)}avoidObstacle(t,i){let e=this.p5i.createVector();for(let s of i){let i=new y(s.position.x,s.position.y,2*s.radius),r=new y(t.position.x,t.position.y,t.sightRadius);if(i.intersectsCircle(r)){let i=o().Vector.dist(t.position,s.position)-s.radius,r=o().Vector.sub(t.position,s.position);r.normalize();let h=this.p5i.map(i,0,t.sightRadius,1,0);e=o().Vector.sub(r,t.velocity),e.normalize(),e.mult(h)}}return e}alignment(t,i){if(0===i.length)return this.p5i.createVector();let e=this.p5i.createVector();for(let t of i)e.add(t.velocity);let s=e.div(i.length);s.setMag(t.maxSpeed);let r=o().Vector.sub(s,t.velocity);return r.limit(t.maxSpeed*t.desiredAlignment),r}cohesion(t,i){if(0===i.length)return this.p5i.createVector();let e=this.p5i.createVector();for(let t of i)e.add(t.position);let s=e.div(i.length),r=o().Vector.sub(s,t.position);r.setMag(t.maxSpeed);let h=o().Vector.sub(r,t.velocity);return h.limit(t.maxSpeed*t.desiredCohesion),h}separation(t,i){if(0===i.length)return this.p5i.createVector();let e=this.p5i.createVector(),s=0;for(let o of i){let i=this.p5i.dist(t.position.x,t.position.y,o.position.x,o.position.y);if(i>0&&i<t.desiredSeparation){let r=this.p5i.createVector(t.position.x-o.position.x,t.position.y-o.position.y);r.normalize(),r.div(i),e.add(r),s++}}return s>0&&e.div(s),e.mag()>0&&(e.setMag(t.maxSpeed),e.sub(t.velocity),e.limit(t.maxSpeed)),e}}new(o())((t=>{function i(){const i=window.innerWidth,e=window.innerHeight;t.resizeCanvas(i,e)}let e;t.setup=()=>{const s=window.innerWidth,o=window.innerHeight;t.createCanvas(s,o).parent("backgroundCanvas"),e=new w(t),window.addEventListener("resize",i)},t.draw=()=>{e.update(),t.background(236,223,204),t.fill(175),t.noStroke();let i=t.createVector(t.width/2,t.height/2),s=t.createVector(t.width,t.height),o=t.createVector(t.mouseX/t.width,t.mouseY/t.height);for(let e=0;e<10;e++){const r=.033*e;t.push(),t.fill(24,28,20,20*e/10);let h=s.copy().mult(1-r),n=o.copy().sub(.5).mult(200*r),a=i.copy().add(n);t.translate(a.x,a.y),t.rectMode(t.CENTER),t.rect(0,0,h.x,h.y,200),t.pop()}e.draw()}}))}},o={};function r(t){var i=o[t];if(void 0!==i)return i.exports;var e=o[t]={exports:{}};return s[t](e,e.exports,r),e.exports}r.m=s,t=[],r.O=(i,e,s,o)=>{if(!e){var h=1/0;for(c=0;c<t.length;c++){for(var[e,s,o]=t[c],n=!0,a=0;a<e.length;a++)(!1&o||h>=o)&&Object.keys(r.O).every((t=>r.O[t](e[a])))?e.splice(a--,1):(n=!1,o<h&&(h=o));if(n){t.splice(c--,1);var d=s();void 0!==d&&(i=d)}}return i}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[e,s,o]},r.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return r.d(i,{a:i}),i},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(t,s){if(1&s&&(t=this(t)),8&s)return t;if("object"==typeof t&&t){if(4&s&&t.__esModule)return t;if(16&s&&"function"==typeof t.then)return t}var o=Object.create(null);r.r(o);var h={};i=i||[null,e({}),e([]),e(e)];for(var n=2&s&&t;"object"==typeof n&&!~i.indexOf(n);n=e(n))Object.getOwnPropertyNames(n).forEach((i=>h[i]=()=>t[i]));return h.default=()=>t,r.d(o,h),o},r.d=(t,i)=>{for(var e in i)r.o(i,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.j=471,(()=>{var t={471:0};r.O.j=i=>0===t[i];var i=(i,e)=>{var s,o,[h,n,a]=e,d=0;if(h.some((i=>0!==t[i]))){for(s in n)r.o(n,s)&&(r.m[s]=n[s]);if(a)var c=a(r)}for(i&&i(e);d<h.length;d++)o=h[d],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(c)},e=self.webpackChunksamuelmoloney_github_io=self.webpackChunksamuelmoloney_github_io||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var h=r.O(void 0,[96],(()=>r(5074)));h=r.O(h)})();